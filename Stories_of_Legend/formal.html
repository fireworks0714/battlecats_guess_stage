<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <title>çœ‹æ•µäººçŒœé—œå¡ - æˆ°é¬¥è²“å’ªèˆŠå‚³ç¯‡</title>
  <style>
    :root {
      --primary-color: #ff6b6b;
      --secondary-color: #4ecdc4;
      --accent-color: #45b7d1;
      --warning-color: #96ceb4;
      --danger-color: #feca57;
    }

    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex; /* ä½¿ç”¨ flexbox è®“å…§å®¹å‚ç›´å±…ä¸­ */
      justify-content: center;
      align-items: center;
      padding: 20px; /* å…§é‚Šè·ï¼Œé˜²æ­¢å…§å®¹è²¼é‚Š */
    }

    .main-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      /* margin-top: 2rem; */ /* ç§»é™¤ï¼Œå› ç‚º body å·²ç¶“ flex äº† */
      /* margin-bottom: 2rem; */ /* ç§»é™¤ */
      overflow: hidden;
      width: 100%; /* ç¢ºä¿å®¹å™¨å¯ä»¥è‡ªé©æ‡‰ */
      max-width: 900px; /* è¨­ç½®æœ€å¤§å¯¬åº¦ */
    }

    .header-section {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 2rem;
      text-align: center;
      position: relative;
    }

    .header-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
      opacity: 0.3;
    }

    .header-section h1 {
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      position: relative;
      z-index: 1;
    }

    .game-content {
      padding: 2rem;
      padding: 2rem;
      /* æ–°å¢çš„æ¨£å¼ */
      margin-left: auto; /* å°‡å·¦å¤–é‚Šè·è¨­ç‚ºè‡ªå‹• */
      margin-right: auto; /* å°‡å³å¤–é‚Šè·è¨­ç‚ºè‡ªå‹•ï¼Œå¯¦ç¾æ°´å¹³ç½®ä¸­ */
      /* å¦‚æœéœ€è¦ï¼Œå¯ä»¥çµ¦ä¸€å€‹ max-width è®“å®ƒä¸è¦æ’æ»¿ main-container */
      /* max-width: 800px; */
    }

    .instruction-card {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      border-radius: 15px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 10px 20px rgba(240, 147, 251, 0.3);
    }

    .example-section {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      border-radius: 15px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      color: white;
    }

    .range-selector {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
      border-radius: 15px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }

    .range-input {
      border: 2px solid #ddd;
      border-radius: 10px;
      padding: 0.75rem;
      font-size: 1.1rem;
      text-align: center;
      transition: all 0.3s ease;
      max-width: 100px;
    }

    .range-input:focus {
      border-color: var(--accent-color);
      box-shadow: 0 0 0 0.2rem rgba(69, 183, 209, 0.25);
      outline: none;
    }

    /* å°‡ç¯„ä¾‹åœ–ç‰‡å’ŒéŠæˆ²åœ–ç‰‡åˆ†é–‹ï¼Œä¸¦è¨­ç½®éŠæˆ²åœ–ç‰‡çš„æ¨£å¼ */
    #examplePic {
      max-width: 100%;
      height: auto;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease;
    }

    #gamePic { /* éŠæˆ²ä¸­é¡¯ç¤ºçš„åœ–ç‰‡ */
      max-width: 100%;
      height: auto;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease;
      margin-bottom: 20px; /* åœ–ç‰‡ä¸‹æ–¹å¢åŠ é–“è· */
      display: block; /* è®“åœ–ç‰‡ç¨ä½”ä¸€è¡Œä¸¦å¯ä»¥å±…ä¸­ */
      margin-left: auto;
      margin-right: auto;
    }

    #gamePic:hover {
      transform: scale(1.02);
    }

    .game-info {
      background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
      border-radius: 15px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      text-align: center;
      box-shadow: 0 8px 16px rgba(252, 182, 159, 0.3);
    }

    .chapter-display {
      font-size: 1.5rem;
      font-weight: bold;
      color: #333;
      margin-bottom: 1rem;
    }

    .start-button {
      background: linear-gradient(135deg, var(--primary-color), var(--danger-color));
      border: none;
      border-radius: 50px;
      padding: 1rem 3rem;
      font-size: 1.2rem;
      font-weight: bold;
      color: white;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: all 0.3s ease;
      box-shadow: 0 8px 16px rgba(255, 107, 107, 0.3);
      position: relative;
      overflow: hidden;
      width: 80%; /* å¯¬åº¦ä½”æ¯” */
      max-width: 300px; /* æœ€å¤§å¯¬åº¦ */
    }

    .start-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 24px rgba(255, 107, 107, 0.4);
      background: linear-gradient(135deg, #ff5252, #ff9800);
    }

    .start-button:active {
      transform: translateY(0);
    }

    .start-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.5s;
    }

    .start-button:hover::before {
      left: 100%;
    }

    .alert-custom {
      border-radius: 15px;
      padding: 1rem 1.5rem;
      margin: 1rem 0;
      font-weight: 500;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .alert-success-custom {
      background: linear-gradient(135deg, #56ab2f, #a8e6cf);
      color: white;
      border: none;
    }

    .alert-danger-custom {
      background: linear-gradient(135deg, #ff416c, #ff4b2b);
      color: white;
      border: none;
    }

    .alert-info-custom {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
    }

    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .pulse {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .icon-bounce {
      animation: bounce 1s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .input-group-custom {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    #userInput {
      max-width: 300px;
      margin: 0 auto;
      height: 45px; /* å¢åŠ é«˜åº¦ */
      font-size: 1.1em; /* èª¿æ•´å­—é«”å¤§å° */
      padding: 5px 10px; /* å¢åŠ å…§é‚Šè· */
      text-align: center;
    }

    @media (max-width: 768px) {
      .header-section h1 {
        font-size: 2rem;
      }
      
      .game-content {
        padding: 1rem;
      }
      
      .start-button {
        padding: 0.8rem 2rem;
        font-size: 1rem;
      }
      
      .input-group-custom {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="main-container">
    <div class="header-section">
      <h1><i class="fas fa-gamepad icon-bounce"></i> çœ‹æ•µäººçŒœé—œå¡</h1>
      <p class="lead mb-0">æˆ°é¬¥è²“å’ª - èˆŠå‚³å¥‡ç¯‡æŒ‘æˆ°</p>
    </div>

    <div class="game-content">
      <div class="instruction-card to-clear">
        <h3><i class="fas fa-info-circle"></i> éŠæˆ²èªªæ˜</h3>
        <p class="mb-2">ğŸ“± è§€å¯Ÿå‚³å¥‡é—œå¡çš„æ•µäººé…ç½®ï¼ŒçŒœå‡ºæ­£ç¢ºçš„é—œå¡åç¨±</p>
        <p class="mb-2">ğŸ¯ <strong>åªåŒ…å«èˆŠå‚³å¥‡é—œå¡</strong></p>
        <p class="mb-0">ğŸ’¡ <strong>æ³¨æ„ç« ç¯€æç¤º</strong>ï¼šç›¸åŒæ•µäººé…ç½®çš„é—œå¡éœ€è¦æ ¹æ“šç« ç¯€ä¾†åˆ¤æ–·</p>
      </div>

      <div class="example-section to-clear">
        <h4><i class="fas fa-star"></i> éŠæˆ²ç¯„ä¾‹</h4>
        <div class="row align-items-center">
          <div class="col-md-6 text-center">
            <p>ğŸ® é¦–å…ˆæœƒé¡¯ç¤ºæ•µäººé…ç½®åœ–ç‰‡</p>
            <img id="examplePic" src="AllStage/0-0.png" class="game-image mb-3" alt="é—œå¡æ•µäººé…ç½®ç¯„ä¾‹" />
          </div>
          <div class="col-md-6 text-center text-md-start">
            <p>ğŸ“ ç„¶å¾Œæç¤ºç« ç¯€åå­—ï¼š<br><strong class="text-warning">ã€Œå‚³èªªçš„é–‹å§‹ã€</strong></p>
            <p>âœ… ä½ éœ€è¦å›ç­”å‡ºï¼š<br><strong class="text-success">ã€Œå¤©æ–åœ°å‹•ã€</strong></p>
          </div>
        </div>
      </div>

      <div class="range-selector to-clear">
        <h4 class="text-center mb-3"><i class="fas fa-sliders-h"></i> è‡ªå®šç¾©ç« ç¯€ç¯„åœ</h4>
        <p class="text-center text-muted">é¸æ“‡ä½ æƒ³æŒ‘æˆ°çš„ç« ç¯€ç¯„åœ (1: å‚³èªªçš„é–‹å§‹ ï½ 49: å¤ä»£ç ”ç©¶æ‰€)</p>
        <div class="input-group-custom">
          <div class="d-flex align-items-center">
            <label class="me-2 fw-bold">èµ·å§‹:</label>
            <input type="number" class="form-control range-input" id="chapterMin" value="1" min="1" max="49" placeholder="1">
          </div>
          <span class="fs-3 text-primary">ï½</span>
          <div class="d-flex align-items-center">
            <label class="me-2 fw-bold">çµæŸ:</label>
            <input type="number" class="form-control range-input" id="chapterMax" value="49" min="1" max="49" placeholder="49">
          </div>
        </div>
      </div>

      <div class="text-center to-clear">
        <h4 class="text-primary mb-3">
          <i class="fas fa-heart text-danger"></i> 
          å°æ–¼å‚³å¥‡æ•…äº‹ï¼Œä½ äº†è§£å¤šå°‘å‘¢ï¼Ÿ
          <i class="fas fa-heart text-danger"></i>
        </h4>
        <p class="lead">æº–å‚™å¥½æ¥å—æŒ‘æˆ°äº†å—ï¼Ÿé»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å§‹éŠæˆ²ï¼</p>
      </div>

      <div class="game-info" id="gameInfo" style="display: none;">
        <div class="chapter-display d-flex flex-column align-items-center mb-3">
          <span id="chapter" class="mb-2"></span>
          <span id="stage"></span>
          <img id="gamePic" src="" alt="é—œå¡æ•µäººé…ç½®" class="mt-3">
        </div>
        <input type="text" class="form-control" id="userInput" placeholder="è«‹è¼¸å…¥é—œå¡åç¨±...">
      </div>

      <div id="warn"></div>
      <div id="answer"></div>

      <div class="text-center mt-4">
        <button type="button" class="btn start-button pulse" id="tap" onclick="displayGame()">
          <i class="fas fa-play me-2"></i>é–‹å§‹éŠæˆ²
        </button>
      </div>
    </div>
  </div>

  <script>
    let isclicked = false;
    let currentChapter = 0;
    let currentStage = 0;

    const chapterNames = [
        "å‚³èªªçš„é–‹å§‹", "ç†±æƒ…çš„åœ‹å®¶", "è‘¡è„ç³–èƒºæ²™æ¼ ", "è²“å’ªå€‘æ¸¡æµ·", "å‡è¦–è‘—è²“çœ¼çŸ³", "è¥¿æ–¹è¡—é“", "é®ªé­šæµ·åŸŸ", "ç«¹å­å³¶", "é»ç³Šç³Šçš„é¾ä¹³æ´", "ç“¦é­¯è‚¯è«¾ç«å±±", "åƒé‡Œä¹‹é“", "é¹¹é­šè¦å¡", "è»è‰¦å³¶", "è²“å’ªç£¨çˆªçš„èµ°å»Š", "å¸•å¾·å«©ç¥æ®¿", "é€€æ½®çš„æµ·æ°´æµ´å ´", "æƒ¡é­”å³¶", "è¶Šç„éš§é“", "å¡å½­ç›£ç„", "çµ²ç¶¢ä¹‹è·¯", "é€šå‘é»‘æš—çš„åœ°ä¸‹é“", "é­”ç‹çš„è±ªå®…", "çµ‚ç„‰å®£å‘Šä¹‹å¤œ", "å¤§æ··æˆ°", "æˆ°çˆ­çš„å‚·ç—•", "æ±¡æŸ“æµ·æ´‹çš„å£äºº", "é€£æ¥å¿ƒèº«çš„æ±è¥¿", "è„†å¼±æ€§å’Œå¼±é…¸æ€§", "è¢«å¼•å°çš„è²“å’ªå€‘", "é»‘æš—çš„åœ‹éš›éƒ½å¸‚", "åŠ æ‹‰Â·å·´Â·å“¥", "å²©æµ·è‹”åŠå³¶", "æƒ¡ç¾…æ–¯è¯é‚¦", "äº¡è€…èšé›†ä¹‹åœ°", "å­¤å³¶å¤§ç˜Ÿç–«", "è¿ªæ­»ä½ æ¨‚åœ’", "è±ªä¾†å¡¢å¸åœ‹", "å°è·Ÿç­æµ·å²¸", "é›²æ³¥æº«æ³‰é„‰", "æ¿ƒæ¿ƒæ˜¥è‰²å³¶", "ITåœ°ä¸‹å¢“ç©´", "æ€ªå±•æœƒä¹‹ç•«", "22å€", "è¶…è¶Šå¤§è‰åŸ", "æš´é¢¨é›ªè»Šé“", "å¥‡é»æ‘", "æœ€çµ‚å¤§é™¸", "å‚³èª¬çš„çµ‚é»", "å¤ä»£ç ”ç©¶æ‰€"
    ];

    const stageNames = [
      ["å¤©æ–åœ°å‹•", "ææ€–å†ç¾", "ç–²ç´¯æ—¥è½", "æ†‚é¬±æ¿•åœ°", "ç¢°ç¢°å»£å ´", "æ„›æ„çœ¼ç¥", "ç‰§å ´çš„å®ˆè­·è€…", "æ²‰ç¡çš„ç…å­"], //0å‚³èªªçš„é–‹å§‹8
      ["å–µå¡”éœ²çªäº", "æµ·é®®é£¯è‰åŸ", "ä½›æœ—æ˜å‘", "æ¡‘æ ¼åˆ©äºå·", "æ¶¼èœæ¹¯é«˜åŸ", "å·§ç¾…çµ²ä¹‹å¤œ", "é¢¨ä¹¾åº­é™¢", "å¡”å¸•æ–¯æ²™æ¼ "], //1ç†±æƒ…çš„åœ‹å®¶8
      ["è»Ÿéª¨ç´ æ²™ä¸˜", "èŠéº»ç´ éºè·¡", "å¤§è±†ç•°é»ƒé…®æ´çªŸ", "å…’èŒ¶ç´ ä¸˜é™µ", "èŒ„ç´…ç´ çš„å¤•é™½", "èœ‚è† ç¶ æ´²", "è‚½é›ªåŸ", "ç»å°¿é…¸å±±"], //2è‘¡è„ç³–èƒºæ²™æ¼ 8
      ["é­¯è½å‡ºèˆª", "å»£é—Šæµ·æ´‹", "äººé­šæµ·ç£", "æ··æ²Œæ½Ÿæ¹–", "å†’ç‰Œæµ·ç›œ", "çŸ›ç›¾æ¼å ´", "æµ·è—»å³¶", "æµ·æ°´å¾ˆé¹¹"], //3è²“å’ªå€‘æ¸¡æµ·8
      ["éœ²é»ç¤¦çŸ³", "æ€§æ„Ÿé˜ä¹³æ´", "å¿ƒè·³åŠ é€Ÿæ´", "è±è‡€æ°´çªª", "é›™å³°å²©", "åˆºæ¿€çš„ä»£åƒ¹"], //4å‡è¦–è‘—è²“çœ¼çŸ³6
      ["æ§æ‰‹çš„é»ƒæ˜", "ç‰›ä»”å¤©å ‚", "é€šç·çŠ¯ä¹‹å¤œ", "é€šå¿ƒéºµåŸ", "æµæµªçš„å“¨å­", "å¤±æœ›çš„ä¿é‘£", "ç‰›ä»”å±±", "é¨è¡“å¤œ"], //5è¥¿æ–¹è¡—é“8
      ["ç´…é®ªé­šæµ·å²¸", "æ–°é®®æ¼å ´", "è”šè—æµ·æ´‹", "ç”Ÿé­šç‰‡æµ·é¢", "ç¨ä½”æ€§ç¶“æ¿Ÿæµ·åŸŸ", "æœ€çµ‚æ­¦å™¨é®ªé­š", "å†·å‡é®ªé­šæˆ°ç·š", "è§£å‰–ç§€æ´çªŸ"], //6é®ªé­šæµ·åŸŸ8
      ["åˆºç—›é«˜åŸ", "ç«¹ç­æµ·å²¸", "æ®ºäººé¬¼å¢æ—", "å™å¿ƒæ²¼æ¾¤", "ç¬¨æ‹™å‘é“", "æ˜Ÿå¡µè¡—é“", "è˜‘è‡æ‡¸å´–", "ç ´æ›‰é‚Šç·š"], //7ç«¹å­å³¶8
      ["ä¹³ç™½éš§é“", "è»Ÿç¶¿ç¶¿çš„æš—é»‘å…µå™¨", "æƒ¡é­”çš„å£ç•«", "è¼•é¢¨ç´°é›¨", "æ’’å¬Œæ®ºæ‰‹", "ç…©æƒ±çš„å²©çŸ³", "æ¼æ°´æ´çªŸ", "è±æ»¿çš„æ€§å–„è«–"], //8é»ç³Šç³Šçš„é¾ä¹³æ´8
      ["åŠèº«æµ´å²©çŸ³", "æ”¾é¬†é–“æ­‡æ³‰", "æ¿ƒç¨ å²©æ¼¿", "ç«ç„°ç‰¢ç± ", "ç«å±±å£å®ˆè­·äºº", "ç†Šç†Šç«å±±è‡¼"], //9ç“¦é­¯è‚¯è«¾ç«å±±6
      ["æ½›åŠ›ä¹‹è·¯", "æ†‚æ„ä¹‹æ¨¹", "å¾®é¢¨çš„æ­Œè²", "å“²å­¸ä¹‹é“", "å¢ƒç•Œç·šçš„æ™©é˜", "æµæ·šä¹‹å·", "å…‰è¼ä¹‹é“", "è©¦ç…‰è°·åº•"], //10åƒé‡Œä¹‹é“8
      ["æµ·å²©çš„è€³èª", "æ¼£æ¼ªå³¶", "é»‘æš—ç« é­šæµ·", "æ³¢è³½é “çš„å°æ†©", "æœˆå…‰æµ·ç˜", "çŠç‘šç¤", "æœˆä¹‹æ–¹èˆŸ", "æ®ºæˆ®å…µå™¨-æ®ºâ€§ä¸é­š"], //11é¹¹é­šè¦å¡8
      ["é’è”¥é­šè…©å¹³åŸ", "èŸ¹é»ƒå¹³åŸ", "é®­é­šåµå²©çªŸ", "æµ·è†½è¡—é“", "é­šå­é†¬åŸå§‹æ—", "ç´è±†æµ·å²¸", "æ¯”ç›®é­šæ£®æ—", "ç”œè¦é‚Šå¢ƒ"], //12è»è‰¦å³¶8
      ["ç´™ç®±è¿´å»Š", "è²“è–„è·ä¹‹å¤¢", "å˜å±å˜å±ç‰†", "æ’¥é–‹æœ¨å±‘", "å˜å±å˜å±æŸ±", "é‡è »äººçš„çœ‹å®ˆäºº"], //13è²“å’ªç£¨çˆªçš„èµ°å»Š6
      ["å®™æ–¯çš„ç¥­å£‡", "é˜¿åŸºé‡Œæ–¯ä¹‹åŠ", "å„æ´›æ–¯ä¹‹è·¯", "è“‹äºçš„é»æ˜", "é˜¿èŠ™è˜¿é»›è’‚å¤§é–€", "é»‘å¸æ–¯çš„è¿·å®®"], //14å¸•å¾·å«©ç¥æ®¿6
      ["æ‘¸èœ†ä»”æ²™ç˜", "å½ˆå¡—é­šå…¬åœ’", "æ³³è¡£ç¾å¥³çš„å½±å­", "äººå±±äººæµ·æ¸¸æ³³æ± ", "é®é™½å‚˜ç”°", "å¤æ—©çš„æ¯”åŸºå°¼", "ä¸ƒå½©é›å°¾é…’", "æ˜Ÿé™å¤§æµ·"], //15é€€æ½®çš„æµ·æ°´æµ´å ´8
      ["æµ·é·—æµ·å²¸", "éµœé¶˜å³¶", "åœ°ä¸‹æ§åˆ¶å®¤", "å£è›‹çš„å¯†æ—", "å’•å’•é›è³½è·‘", "è²“å’ªå¯©åˆ¤", "ç›£ç„è‰åŸ", "çœ‹å®ˆäººèˆ‡å®ˆå¢“äºº"], //16æƒ¡é­”å³¶8
      ["ç½ªèˆ‡ç½°", "å¯¦åˆ‘åˆ¤æ±º", "å“ˆåˆ©éš§é“", "å¤œä¹‹å¯‚éœ", "é™·é˜±åœ°å¸¶", "å¤§é€ƒäº¡"], //17è¶Šç„éš§é“6
      ["è¶Šç„æ—¥èªŒ", "æœ€å¾Œçš„æµæ°“", "ç›£ç„ç ´å£", "è‡ªç”±ä¹‹ç‹", "æ’’è¬Šçš„ä¸‹å ´", "è±¬åœˆçš„å¿Œè«±"], //18å¡å½­ç›£ç„6
      ["çŠé™€ç¾…çš„ä¼‘æ¯è™•", "çƒæ‰˜é‚¦å°±åœ¨é‚£è£¡", "å¾Œé†é†å±±è„Š", "çŒ´å­é­”æ³•", "ç•°åœ‹ä¹‹é–€", "é¦¬å¯æ³¢ç¾…ä¹‹è·¯", "è±¬çš„å‰©é£¯", "æ²³ç«¥çš„å†·æ±—"], //19çµ²ç¶¢ä¹‹è·¯8
      ["æœ‰å‚™ç„¡æ‚£", "é»‘æš—ç‹¹çª„ææ€–é™°é“", "ç´…è‰²è­¦å ±", "äººç”Ÿçš„é™·é˜±", "éš±ç´„çš„æ™šé˜", "åœ°åº•ä¸–ç•Œ"], //20é‚å‘é»‘æš—çš„åœ°ä¸‹é“6
      ["æœ‰éŒ¢äººå®¶çš„ç„é—œ", "æµ´å®¤", "æ™‚å°šçš„VIPå®¤", "æ‹·å•é–“", "ç¨è£è€…çš„èŠ±åœ’", "é­”ç‹çš„å¯¢å®¤"], //21é­”ç‹çš„è±ªå®…6
      ["èƒŒå›ä¹‹å®´", "çµ‚ç„‰çš„æ·¨åŒ–", "é»‘è‰²é æ„Ÿ", "ç ´ç¢çš„é¢å…·", "ç¥æ„›ä¹‹ç± ", "ç´…ç‹ä¹‹è–è€…"], //22çµ‚ç„‰å®£å‘Šä¹‹å¤œ6
      ["çš‡å®¶å¥¶èŒ¶", "æ†¤æ€’èˆ‡çˆ­é¬¥å¿ƒ", "æ‚„æ‚„æ¥è¿‘çš„æˆ°æ…„çš„è©©", "è†½å°é¬¼çš„é™·é˜±", "é»‘æš—ä¸­èª•ç”Ÿçš„å®¿æ•µ", "æµ·é®®èˆ‡è¡€çš„è…¥å‘³"], //23å¤§æ··æˆ°6
      ["ç“¦çˆ¾åŸºéº—å¹³åŸ", "åœ°é›·å€", "ç§˜å¯†æ­¦å™¨", "æ³¥æ¿˜çš„å£•æº", "ç‹™æ“Šæ‰‹å¢æ—", "æ–œé™½çš„å£«å…µ", "çˆ¶è¦ªçš„èƒŒå½±", "é‚Šå¢ƒç·šå¥ªé‚„ä½œæˆ°"], //24æˆ°çˆ­çš„å‚·ç—•8
      ["é‘½æ²¹å¹³å°", "æ±—èˆ‡ä¹™é†›", "å¤ä»£çš„å¯©åˆ¤", "å¯ç–‘çš„è‡ªæ²»åœ˜é«”", "åƒåœ¾æµ·å²¸", "è‹¯ç”°", "æ”¿åºœçš„èµ°ç‹—", "ç©ºé™çš„æµ·æµ"], //25æ±¡æŸ“æµ·æ´‹çš„å£äºº8
      ["æ™šéœçš„å’†å“®", "æ ¼å¼å¡”,å´©å£", "æˆ°å£«çš„é»æ˜", "è¢«è©›å’’çš„æ°¸ä¹…å‡åœŸ", "è²“çš„å°è¨¼", "æ„šè€…çš„çµ¶æœ›", "ä»£è¬ç—‡å€™ç¾¤", "æ„›èˆ‡æ­»"], //26é€£æ¥å¿ƒèº«çš„æ±è¥¿8
      ["è‡³å°‘åƒéš»è²“", "åœ“æ¡Œæ­¦å£«", "è²“æ—æ·¨åŒ–", "ç¾éº—çµ‚çµ", "å¾æƒ¡å¤¢ä¸­é©šé†’", "å‰›å­¸æœƒå»æ„›"], //27è„†å¼±æ€§å’Œå¼±é…¸æ€§6
      ["æ–°çš„æˆ°å½¹", "éº¥ç”°åœˆ", "é‡é³¥è§€å¯Ÿ", "èªä¸­å¸¶åˆº", "é»‘è‰²æ³¢æµª"], //28è¢«å¼•å°çš„è²“å’ªå€‘5
      ["é£¢é¤“æ£®æ—", "è‡ªä¸é‡åŠ›è€…çš„å·¢ç©´", "é€šå‹¤å°–å³°", "é›†é«”å¤§æ»…çµ•", "ä¾†è‡ªåœ°åº•å¸åœ‹çš„åˆºå®¢", "ç„¡æ³•åœ°å¸¶æ”¯é…è€…"], //29é»‘æš—çš„åœ‹éš›åŸå¸‚6
      ["DNAèˆ‡DHA", "å¤•é™½ç›œçµè€…", "é‡é›£è€…å€‘", "ç•°æ˜Ÿç”Ÿæ…‹èª¿æŸ¥åœ˜", "æ¨‚åœ’ç”Ÿç‰©", "ç’°å¢ƒä¿è­·åœ˜é«”"], //30åŠ æ‹‰ãƒ»å·´ãƒ»å“¥6
      ["å‡œå‡œé˜²é¢¨æ—", "ä¼Šæ¯”åˆ©äºå¹³é‡", "å“­ç ‚æµ·å²¸", "é»ƒé‡‘è¡—", "è¶…ç´šæ…¢è»Šé“", "æ­¦å®¶å¤§é™¢å®¶æ—å…§é¬¥"], //31å²©æµ·è‹”åŠå³¶6
      ["ç·‹ç´…å»£å ´", "çŸ¥è­˜éšç´š", "éœ¸é“é ˜åœŸ", "æ±ºæˆ°éœ¸ç‹æµ·", "å®‡å®™é–‹ç™¼å±€", "é–“è«œä¹‹æˆ€"], //32æƒ¡ç¾…æ–¯è¯é‚¦6
      ["äº¡é­‚é¬¼å±‹", "æ´»ç¥­å“æ²¼æ¾¤", "åŠå¤œé¬¼ä¸ŠåºŠ", "é¨·éˆè¡—", "ç™½å…‰ä¹‹å¤œ", "æ²‰é»˜çš„å°è²“"], //33äº¡è€…èšé›†ä¹‹åœ°6
      ["æ„ŸæŸ“è€…å·æ¸¡", "é«˜ç§‘æŠ€æ¡æµ·å¸¶æ³•", "ç¥–å…ˆå¤§éŠè¡Œ", "åè„«é€ƒéƒ¨éšŠ", "æ†¤æ€’é®ªé­šæˆ°ç·š", "å—æ„ŸæŸ“çš„å³¶ä¸»"], //34å­¤å³¶å¤§ç˜Ÿç–«6
      ["å…¥å ´å¤§é–€", "æ…¢ååé£›è»Š", "çœŸå¯¦VRåœ°ç„", "50åº¦æ¨‚åœ’", "æé›ç¥æ®¿", "éª¨ç°å…¬å¯“"], //35è¿ªæ­»ä½ æ¨‚åœ’6
      ["ç‹—ä»”ç‹‚ç†±æ½®", "å› ç·£ç·‹èæ˜æ˜Ÿ", "é£›è¶Šæ³¡æ²«æœŸ", "ç«¥æ˜Ÿå‡ºèº«", "èŠ±é‚Šé†œè", "å¤§è†½æ›å›šå½±åŸ"], //36è±ªä¾†å¡¢å¸åœ‹6
      ["å‘†ç“œæ¸¸æ³³å¤§æœƒ", "æµ·é¢¨ç¾å®¹é™¢", "æ·±æµ·æ•¢æ­»éšŠ", "é èº¬å¤§éŠè¡Œ", "å½±è—é‡é®åšè¦½æœƒ", "ç„¡æ³•å†ä¸Šé™¸"], //37å°è·Ÿç­æµ·å²¸6
      ["è‡ªå®¶è£½é›»ç™‚æµ´ç¼¸", "ç†±æ°´æ¾¡å¿è€å¤§è³½", "åŒ–å­¸å¥‡è¹Ÿé•·å£½æ¹¯", "æ±™å¢æ•µäººé»‘è‰²æ±—", "æº«æ³‰æºé ­æ½›ä¼è€…", "æ°¤æ°³é„‰æ¥µæ¨‚åœ°ç„"], //38é›²æ³¥æ¸©æ³‰éƒ·6
      ["è±è…´ç„¡äººç¢¼é ­", "æµªæ¼«é«˜é€Ÿå…¬è·¯", "çˆ›é†‰çš„æŒ‰æ‘©å¸«", "çœ‹å®ˆæ‰€å¤§ç†±æˆ€", "è²»æ´›è’™çš„å¤§é–€", "æ˜¥é¢¨é›²é›¨ä¹‹é¤¨"], //39æ¿ƒæ¿ƒæ˜¥è‰²å³¶6
      ["é ­é¦™è­¦è¡›éšŠ", "æ’¥æ¥å¼è¿´å»Š", "åƒåˆ°é£½åŸºåº§", "Mrs.DOSä¹‹å¢“", "æƒ¡æ„ç¶²ç«™éºå€", "ç¥åƒè€¦åˆå™¨"], //40ITåœ°ä¸‹å¢“ç©´6
      ["è—è¡“ç«‹é«”æ´¾", "ç™‚ç™’åœ°ç„ç¹ª", "è‰²å’Œå°šæ°´å¢¨", "ä¸€åŠƒä¸‰å„„äº”", "ä¸è‰¯å®—æ•™ç•«", "é¤¨é•·è‡ªç•«åƒ"], //41æ€ªå±•æœƒä¹‹ç•«6
      ["ç¾…æ–¯å¨çˆ¾è·¯äº‹ä»¶", "å¤§è¦æ¨¡å± è²“å¥‡æ¡ˆ", "äºç•¶æ–¯åŸºå‹é£›ç›¤", "é‡è¦‹å¸å¸å°å±±ç¾Š", "å¤æ–¯é€šé€šå¤§çˆ†ç‚¸", "è¦ªæ„›çš„ä½ ç´¯äº†å—"], //4222å€6
      ["å¼±è‚‰å¼·é£Ÿ", "éˆå³°è‚ŒåŠ›é¦¬æœ­ç¾…å±±", "åŸå§‹å¼·æ•µ,å†ç¾", "æ­¡å–œçš„ä¹¾å­£", "é›»å­é‡ç”Ÿå‹•ç‰©åœ’", "é›¢å¤©åœ‹æœ€è¿‘çš„é£²æ°´å ´"], //43è¶…è¶Šå¤§è‰åŸ6
      ["ä¹¾è£‚äº¤æµé“", "æµä¸åœæµ·åº•éš§é“", "å‡ç˜¡ä¼‘æ¯ç«™", "æš–å’Œå°å‘è»Šé“", "çœ çœ äº¤é€šè­¦å‚™éšŠ", "ä¼‘å…‹æ”¶è²»ç«™"], //44æš´é¢¨é›ªè»Šé“6
      ["ç„¡æ‰€ä¸åœ¨è²©è³£è™•", "VRå‰²ç¨»å ´", "ç©¿æˆ´å¼é€å¤©å", "8Kå †è‚¥æ¡¶", "æ—¥è½å€å¡Šéˆ", "åŸºå› ç›†èˆ"], //45å¥‡é»æ‘6
      ["å¤©æ¶¯å°å»Ÿ", "æœ«æ—¥ä¹‹è°·", "æœ€å¾Œé«˜å¡”", "çµ‚é»è¿·å®®", "æ­¢å¢ƒæ´çªŸ", "æµ·è§’ç¥æ®¿"], //46æœ€çµ‚å¤§é™¸6
      ["æ±ºæ–·æ™‚åˆ»", "å¾©ä»‡æº–å‚™", "é©•å‚²å…‰æ¦®", "ç”Ÿå‘½ä½èª", "å¾©æ´»å½å’’", "å¥‘ç´„ä¹‹æ¯", "é»ƒæ˜é¢¨èµ·", "ç ´ç¢èª“è¨€"], //47å‚³èªªçš„çµ‚é»8
      ["å¤ªå¤ä¹‹åŠ›"] //48å¤ä»£ç ”ç©¶æ‰€1
    ];

    function displayGame() {
      const warnEl = document.getElementById("warn");
      const answerEl = document.getElementById("answer");
      const gameInfoEl = document.getElementById("gameInfo");
      const tapButton = document.getElementById("tap");
      const gamePicEl = document.getElementById("gamePic"); // ç²å–éŠæˆ²åœ–ç‰‡å…ƒç´ 

      // æ¸…é™¤ä¹‹å‰çš„è­¦å‘Šå’Œç­”æ¡ˆ
      warnEl.innerHTML = "";
      answerEl.innerHTML = "";
      warnEl.className = ""; // æ¸…é™¤èˆŠçš„Bootstrapé¡åˆ¥
      answerEl.className = ""; // æ¸…é™¤èˆŠçš„Bootstrapé¡åˆ¥

      if (!isclicked) {
        // ç²å–è¼¸å…¥æ¡†çš„å€¼ï¼Œä¸¦è½‰æ›ç‚ºæ•¸å­—
        const min = parseInt(document.getElementById("chapterMin").value);
        const max = parseInt(document.getElementById("chapterMax").value);
        
        // é©—è­‰è¼¸å…¥
        if (isNaN(min) || isNaN(max) || min < 1 || max > chapterNames.length || min > max) {
          warnEl.innerHTML = `
            <div class="alert alert-danger-custom alert-custom fade-in">
              <i class="fas fa-exclamation-triangle me-2"></i>
              è«‹è¼¸å…¥æ­£ç¢ºçš„ç« ç¯€ç¯„åœ (1 åˆ° ${chapterNames.length})ï¼Œä¸”èµ·å§‹å€¼ä¸èƒ½å¤§æ–¼çµæŸå€¼ï¼
            </div>
          `;
          return;
        }

        // éš±è—èªªæ˜å…§å®¹
        const elementsToClear = document.querySelectorAll(".to-clear");
        elementsToClear.forEach(el => {
          el.style.transition = "opacity 0.5s ease";
          el.style.opacity = "0";
          setTimeout(() => el.style.display = "none", 500);
        });

        // é¡¯ç¤ºéŠæˆ²ä¿¡æ¯å€å¡Š
        setTimeout(() => {
          gameInfoEl.style.display = "block";
          gameInfoEl.classList.add("fade-in");
        }, 600); // ç­‰å¾…èªªæ˜éš±è—å¾Œå†é¡¯ç¤º

        // å»ºç«‹ç« ç¯€ç¯„åœ (0-based index)
        const chapterRange = [];
        for (let i = min - 1; i < max; i++) {
          chapterRange.push(i);
        }

        // éš¨æ©Ÿé¸æ“‡ç« ç¯€
        currentChapter = chapterRange[Math.floor(Math.random() * chapterRange.length)];
        
        // éš¨æ©Ÿé¸æ“‡å°é—œå¡ï¼Œæ ¹æ“šè©²ç« ç¯€å¯¦éš›çš„å°é—œå¡æ•¸é‡
        if (stageNames[currentChapter] && stageNames[currentChapter].length > 0) {
            currentStage = Math.floor(Math.random() * stageNames[currentChapter].length);
        } else {
            // å¦‚æœæŸå€‹ç« ç¯€æ²’æœ‰å®šç¾©å°é—œå¡ï¼Œå‰‡å ±éŒ¯ä¸¦é‡è©¦
            console.error(`Error: Chapter ${currentChapter} (${chapterNames[currentChapter]}) has no stages defined.`);
            warnEl.innerHTML = `
                <div class="alert alert-danger-custom alert-custom fade-in">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    å…§éƒ¨éŒ¯èª¤ï¼šç„¡æ³•æ‰¾åˆ°è©²ç« ç¯€çš„å°é—œå¡è³‡æ–™ï¼Œè«‹å˜—è©¦é‡æ–°é–‹å§‹ã€‚
                </div>
            `;
            // å¼·åˆ¶é‡è¨­ä»¥ä¾¿é»æ“Š"ä¸‹ä¸€é¡Œ"æ™‚èƒ½é‡æ–°é–‹å§‹
            isclicked = false; 
            tapButton.innerHTML = '<i class="fas fa-redo me-2"></i>ä¸‹ä¸€é¡Œ';
            tapButton.classList.remove("start-button");
            tapButton.classList.add("btn-info"); // å¯ä»¥çµ¦ä¸€å€‹ä¸åŒçš„æ¨£å¼
            return;
        }

        // è¨­å®šéŠæˆ²åœ–ç‰‡çš„ src
        gamePicEl.src = `AllStage/${currentChapter}-${currentStage}.png`;
        gamePicEl.classList.add("fade-in"); // åœ–ç‰‡å‡ºç¾æ™‚å¸¶æœ‰æ·¡å…¥å‹•ç•«

        // é¡¯ç¤ºå¤§é—œåç¨±
        document.getElementById("chapter").innerHTML = `<span class="badge bg-primary fs-6">ç¬¬ ${currentChapter + 1} ç« </span>`;
        document.getElementById("stage").innerHTML = `<span class="text-dark fw-bold">${chapterNames[currentChapter]}</span>`;
        
        // è¨­ç½®è¼¸å…¥æ¡†çš„ placeholder
        document.getElementById("userInput").value = ""; // æ¸…ç©ºä¸Šæ¬¡çš„è¼¸å…¥
        document.getElementById("userInput").placeholder = "è«‹è¼¸å…¥é—œå¡åç¨±...";
        document.getElementById("userInput").focus(); // è‡ªå‹•èšç„¦åˆ°è¼¸å…¥æ¡†

        // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
        isclicked = true;
        tapButton.innerHTML = '<i class="fas fa-check me-2"></i>ç¢ºèªç­”æ¡ˆ';
        tapButton.classList.remove("pulse", "start-button"); // ç§»é™¤è„ˆå‹•å‹•ç•«å’ŒåŸå§‹æ¨£å¼
        tapButton.classList.add("btn-primary"); // è®Šæˆç¢ºèªæŒ‰éˆ•çš„è—è‰²

      } else {
        // æª¢æŸ¥ç­”æ¡ˆ
        const userInput = document.getElementById("userInput");
        const userAnswer = userInput ? userInput.value.trim() : "";
        
        const normalize = str => str.replace(/\s+/g, '').toLowerCase(); // è½‰æ›ç‚ºå°å¯«ä¸¦ç§»é™¤ç©ºç™½ï¼Œä¾¿æ–¼æ¯”è¼ƒ
        const correctAnswer = stageNames[currentChapter][currentStage];
        const normalizedCorrectAnswer = normalize(correctAnswer);
        const normalizedUserAnswer = normalize(userAnswer);

        if (userAnswer === "") {
          warnEl.innerHTML = `
            <div class="alert alert-danger-custom alert-custom fade-in">
              <i class="fas fa-times-circle me-2"></i>
              è«‹ä¸è¦ç•™ç©ºç™½ï¼ä½ æ²’æ©Ÿæœƒé‡æ–°å›ç­”äº†ï¼
            </div>
          `;
        } else {
          if (normalizedUserAnswer === normalizedCorrectAnswer) {
            warnEl.innerHTML = `
              <div class="alert alert-success-custom alert-custom fade-in">
                <i class="fas fa-trophy me-2"></i>
                ğŸ‰ æ­å–œä½ ç­”å°äº†ï¼ä½ çœŸæ˜¯å°ˆå®¶ï¼
              </div>
            `;
          } else {
            warnEl.innerHTML = `
              <div class="alert alert-danger-custom alert-custom fade-in">
                <i class="fas fa-times me-2"></i>
                å¾ˆå¯æƒœç­”éŒ¯äº†ï¼Œç¹¼çºŒåŠ æ²¹ï¼
              </div>
            `;
          }
        }

        // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
        answerEl.innerHTML = `
          <div class="alert alert-info-custom alert-custom fade-in">
            <i class="fas fa-lightbulb me-2"></i>
            <strong>æ­£ç¢ºç­”æ¡ˆï¼š</strong>${chapterNames[currentChapter]} - ${correctAnswer}
          </div>
        `;

        // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹ç‚ºä¸‹ä¸€é¡Œ
        tapButton.innerHTML = '<i class="fas fa-redo me-2"></i>ä¸‹ä¸€é¡Œ';
        tapButton.classList.remove("btn-primary"); // ç§»é™¤ç¢ºèªæŒ‰éˆ•è—è‰²
        tapButton.classList.add("btn-info"); // è®Šå› info è—è‰²
        isclicked = false;
      }
    }

    // æ·»åŠ Enteréµæ”¯æŒ
    document.addEventListener('keypress', function(e) {
      // åªæœ‰åœ¨éŠæˆ²é€²è¡Œä¸­ (isclicked ç‚º true) ä¸”è¼¸å…¥æ¡†å­˜åœ¨æ™‚æ‰è§¸ç™¼
      if (e.key === 'Enter' && isclicked && document.getElementById('userInput')) {
        displayGame();
      }
    });
  </script>
</body>
</html>